!!!
%html
  %head
    %meta(charset="utf-8")
    %meta(http-equiv="X-UA-Compatible" content="IE=edge")
    %meta(name="viewport" content="width=device-width, initial-scale=1.0")
    %style(type="text/css")
      div#wrapper { position: relative; margin: 0 auto; } |
      p.boxes { display: none; position absolute; } |
      p#box1 { display: block; } |
      .prev { position: absolute; left: -20px; top: 0; border: 0; width: 100px; height: 1000px; opacity: 0; background: -moz-linear-gradient(left, rgba(0,0,0,1), rgba(255,255,255,0)); background: -webkit-gradient(linear, left, right, from(rgba(0,0,0,0.5)), to(rgba(255,255,255,0)));} |
      .next { position: absolute; right: 0; top: 0; border: 0; width: 100px; height: 1000px; opacity: 0; background: -moz-linear-gradient(left, rgba(255,255,255,0), rgba(0,0,0,0.5)); background: -webkit-gradient(linear, left, right, from(rgba(255,255,255,0)), to(rgba(0,0,0,0.5)));} |
      #controller{ width: 50%; color: black; text-align: center; position: fixed; top: 93%; left: 25%; background: rgba(255,255,255,0.5); z-index: 10; } |
    %link(href="/css/bootstrap.min.css" rel="stylesheet")
    %title= "#{title}"
  %body
    #wrapper(align="center")
      .row
        - images.each_with_index do |image, index|
          .col-xs-6.col-md-3
            %img(src="#{image}" width="240px")
    %script(src="http://code.jquery.com/jquery.min.js")
    %script(type="text/javascript")
      var wrapper = $("div#wrapper"); |
      var resize = function(page) { |
        var scale = Math.min($(window).width() / page.width(), $(window).height() / page.height()); |
        page.width(page.width() * scale); |
      }; |
      function setPageNumber(current) { |
        var allNumber = wrapper.find("p").size(); |
        $("span#pageNumber").text((current + 1) + '/' + allNumber); |
      }; |
      $(document).ready( function() { |
        setPageNumber(0); |
        resize(wrapper.find("p:visible").children("img")); |
      }); |
      function go(page) { |
        var now = wrapper.find("p:visible"); |
        if($('div#wrapper p').index(page) != $('div#wrapper p').index(now)) { |
          now.fadeOut("fast", function() { |
            page.fadeIn("fast"); |
            resize(page.children("img")); |
          }); |
          setPageNumber($('div#wrapper p').index(page)); |
        } |
      }; |
      $("input:button.prev").click(function() { |
        var prev = wrapper.find("p:visible").prev(); |
        if(prev.length != 0){ |
          go(prev); |
        } |
      }); |
      $("input:button.next").click(function() { |
        var next = wrapper.find("p:visible").next(); |
        if(next.length != 0){ |
          go(next); |
        } |
      }); |
      $("input.next,input.prev").hover( function() { |
        $(this).css('width', $(window).width() / 5); |
        $(this).css('height', $(window).height()); |
        $(this).css('opacity', '1'); |
      }, function(){ |
        $(this).css('opacity', '0'); |
      }); |
      function goFirst(){ |
        var first = wrapper.find('p:first'); |
        go(first); |
      } |
      function goPrev(){ |
        var prev = wrapper.find('p:visible').prev(); |
        if(prev.length != 0) { |
          go(prev); |
        } |
      } |
      function goNext(){ |
        var next = wrapper.find('p:visible').next(); |
        if(next.length != 0) { |
          go(next); |
        } |
      } |
      function goLast(){ |
        var last = wrapper.find('p:last'); |
        go(last); |
      } |
        
